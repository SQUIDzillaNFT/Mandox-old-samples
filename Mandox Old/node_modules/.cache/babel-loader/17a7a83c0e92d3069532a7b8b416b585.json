{"ast":null,"code":"import _objectSpread from\"C:/Users/nrwis/Desktop/mandox-nft-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/nrwis/Desktop/mandox-nft-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/nrwis/Desktop/mandox-nft-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/nrwis/Desktop/mandox-nft-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import DashboardHeader from\"../../Component/DashboardHeader\";import UserPanelHeader from\"../../Component/UserPanelHeader\";import{toast}from\"react-toastify\";import{auth,firestore,storage}from\"../../firebase\";import{eventBus}from\"../../Utils/EventBus\";import\"./style.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Settings(){var _useState=useState(JSON.parse(localStorage.getItem('authUser')).avatar),_useState2=_slicedToArray(_useState,2),avatar=_useState2[0],setAvatar=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),avatarFile=_useState4[0],setAvatarFile=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),oldPass=_useState6[0],setOldPass=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),newPass=_useState8[0],setNewPass=_useState8[1];var _useState9=useState(JSON.parse(localStorage.getItem('authUser'))),_useState10=_slicedToArray(_useState9,2),user=_useState10[0],setUser=_useState10[1];var saveChanges=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var uploadTask;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(newPass!==''){auth.signInWithEmailAndPassword(user.email,oldPass).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.user.updatePassword(newPass);case 2:toast.success(\"Updated password successfully\");case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(error){toast.error(error);});}if(avatarFile===''){firestore.collection(\"users\").doc(user.id).update({name:user.name,details:user.details}).then(function(){localStorage.setItem('authUser',JSON.stringify(user));toast.success(\"Updated Profile successfully\");});}else{uploadTask=storage.ref(\"/images/\".concat(avatarFile.name)).put(avatarFile);//initiates the firebase side uploading\nuploadTask.on('state_changed',function(snapShot){console.log(snapShot);},function(err){console.log(err);},function(){storage.ref('images').child(avatarFile.name).getDownloadURL().then(function(fireBaseUrl){setAvatar(fireBaseUrl);firestore.collection(\"users\").doc(user.id).update({avatar:fireBaseUrl,name:user.name,details:user.details}).then(function(){setUser(_objectSpread(_objectSpread({},user),{},{avatar:fireBaseUrl}));localStorage.setItem('authUser',JSON.stringify(_objectSpread(_objectSpread({},user),{},{avatar:fireBaseUrl})));eventBus.dispatch(\"updateAvatar\",{newUser:JSON.stringify(_objectSpread(_objectSpread({},user),{},{avatar:fireBaseUrl}))});toast.success(\"Updated profile successfully\");});});});}case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function saveChanges(){return _ref.apply(this,arguments);};}();var handleAvatar=function handleAvatar(){var input=document.createElement(\"input\");input.type=\"file\";input.accept=\"image/jpeg, image/png, image/gif\";input.onchange=function(event){var target=event.target;var files=target.files;var file=files[0];setAvatar(URL.createObjectURL(file));setAvatarFile(file);};input.click();};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(DashboardHeader,{}),/*#__PURE__*/_jsx(\"section\",{className:\"user-panel-main-box\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-panel-main\",children:[/*#__PURE__*/_jsx(UserPanelHeader,{title:\"My Profile\"}),/*#__PURE__*/_jsx(\"div\",{className:\"user-store-area\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user-setting-box-area\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row user-setting-box-top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-3 col-lg-3 col-md-3 col-sm-12 col-12 user-setting-left\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"setting-change-profile text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"change-profile-icon\",onClick:handleAvatar,children:/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(\"img\",{src:avatar})})}),/*#__PURE__*/_jsx(\"h3\",{className:\"user-title\",children:\"Change Image\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-9 col-lg-9 col-md-9 col-sm-12 col-12 user-setting-right\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Display Name\"}),/*#__PURE__*/_jsx(\"input\",{className:\"theme-input\",type:\"text\",name:\"Display Name\",value:user.name,onChange:function onChange(e){return setUser(_objectSpread(_objectSpread({},user),{},{name:e.target.value}));},placeholder:\"Stefan Harary\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Wallet Address\"}),/*#__PURE__*/_jsx(\"input\",{className:\"theme-input\",type:\"text\",name:\"wallet address\",placeholder:\"Please connect a wallet\",disabled:\"\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"To update your address just change your account in your wallet.\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"theme-input\",value:user.details,onChange:function onChange(e){return setUser(_objectSpread(_objectSpread({},user),{},{details:e.target.value}));},rows:\"4\",placeholder:\"default\"})]})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"theme-form-title text-center\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"theme-title\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Social Media\"})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Twitter\"}),/*#__PURE__*/_jsx(\"input\",{className:\"theme-input\",type:\"text\",name:\"twitter\",placeholder:\"link to your twitter\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Cent\"}),/*#__PURE__*/_jsx(\"input\",{className:\"theme-input\",type:\"text\",name:\"cent\",placeholder:\"link to your cent\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Reddit\"}),/*#__PURE__*/_jsx(\"input\",{className:\"theme-input\",type:\"text\",name:\"reddit\",placeholder:\"link to your reddit\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Youtube\"}),/*#__PURE__*/_jsx(\"input\",{className:\"theme-input\",type:\"text\",name:\"youtube\",placeholder:\"link to your youtube\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Instagram\"}),/*#__PURE__*/_jsx(\"input\",{className:\"theme-input\",type:\"text\",name:\"instagram\",placeholder:\"link to your instagram\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"theme-input-box\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"Listing-checkbox\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"styled-checkbox\",id:\"styled-checkbox-1\",type:\"checkbox\",value:\"value1\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"styled-checkbox-1\",children:/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Disable email notifications.\"}),\" (You won't recieve ANY emails from Mintable if you do this - including important ones related to your account security or purchases)\"]})})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"theme-form-title text-center\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"theme-title\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Change your password\"})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Current Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"theme-input\",type:\"password\",name:\"current password\",onChange:function onChange(e){return setOldPass(e.target.value);},placeholder:\"Enter current password\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"theme-input-box\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"New Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"theme-input\",type:\"password\",name:\"new password\",onChange:function onChange(e){return setNewPass(e.target.value);},placeholder:\"Enter new password\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"theme-input-box text-center\",style:{marginTop:30},children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:saveChanges,className:\"theme-btn\",children:\"Save Changes\"})})})]})]})})})})]})})})})})]});}export default Settings;","map":{"version":3,"sources":["C:/Users/nrwis/Desktop/mandox-nft-main/src/Pages/Settings/index.js"],"names":["React","useState","DashboardHeader","UserPanelHeader","toast","auth","firestore","storage","eventBus","Settings","JSON","parse","localStorage","getItem","avatar","setAvatar","avatarFile","setAvatarFile","oldPass","setOldPass","newPass","setNewPass","user","setUser","saveChanges","signInWithEmailAndPassword","email","then","res","updatePassword","success","catch","error","collection","doc","id","update","name","details","setItem","stringify","uploadTask","ref","put","on","snapShot","console","log","err","child","getDownloadURL","fireBaseUrl","dispatch","newUser","handleAvatar","input","document","createElement","type","accept","onchange","event","target","files","file","URL","createObjectURL","click","e","value","marginTop"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport DashboardHeader from \"../../Component/DashboardHeader\";\nimport UserPanelHeader from \"../../Component/UserPanelHeader\";\nimport {toast} from \"react-toastify\";\nimport {auth, firestore, storage} from \"../../firebase\";\nimport {eventBus} from \"../../Utils/EventBus\";\nimport \"./style.css\";\n\nfunction Settings() {\n\n  const [avatar, setAvatar] = useState(JSON.parse(localStorage.getItem('authUser')).avatar);\n  const [avatarFile, setAvatarFile] = useState('');\n  const [oldPass, setOldPass] = useState('');\n  const [newPass, setNewPass] = useState('');\n\n\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('authUser')));\n\n\n  const saveChanges = async() => {\n    if (newPass !== '') {\n      auth\n        .signInWithEmailAndPassword(user.email, oldPass)\n        .then(async (res) => {\n          await res.user.updatePassword(newPass);\n          toast.success(\"Updated password successfully\")\n        })\n        .catch((error) => {\n          toast.error(error);\n        });\n    }\n\n    if (avatarFile === '') {\n      firestore.collection(\"users\").doc(user.id).update\n      ({\n        name: user.name,\n        details: user.details\n      }).then(() => {\n        localStorage.setItem('authUser', JSON.stringify(user));\n        toast.success(\"Updated Profile successfully\");\n      });\n    } else {\n      const uploadTask = storage.ref(`/images/${avatarFile.name}`).put(avatarFile)\n      //initiates the firebase side uploading\n      uploadTask.on('state_changed',\n        (snapShot) => {\n          console.log(snapShot)\n        }, (err) => {\n          console.log(err)\n        }, () => {\n          storage.ref('images').child(avatarFile.name).getDownloadURL()\n            .then(fireBaseUrl => {\n              setAvatar(fireBaseUrl);\n              firestore.collection(\"users\").doc(user.id).update\n              ({\n                avatar: fireBaseUrl,\n                name: user.name,\n                details: user.details\n              }).then(() => {\n                setUser({...user, avatar: fireBaseUrl});\n                localStorage.setItem('authUser', JSON.stringify({...user, avatar: fireBaseUrl}));\n                eventBus.dispatch(\"updateAvatar\", { newUser: JSON.stringify({...user, avatar: fireBaseUrl}) });\n                toast.success(\"Updated profile successfully\");\n              });\n            })\n        })\n    }\n  }\n\n  const handleAvatar = () => {\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = \"image/jpeg, image/png, image/gif\";\n    input.onchange = (event) => {\n      const target = event.target;\n      const files = target.files;\n      const file = files[0];\n      setAvatar(URL.createObjectURL(file));\n      setAvatarFile(file);\n    };\n    input.click();\n  }\n  return (\n    <div>\n      <DashboardHeader />\n      <section className=\"user-panel-main-box\">\n        <div className=\"container\">\n          <div className=\"row\">\n            <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\n              <div className=\"user-panel-main\">\n                <UserPanelHeader title=\"My Profile\" />\n                <div className=\"user-store-area\">\n                  <div className=\"row\">\n                    <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\n                      <div className=\"user-setting-box-area\">\n                        <div className=\"row user-setting-box-top\">\n                          <div className=\"col-xl-3 col-lg-3 col-md-3 col-sm-12 col-12 user-setting-left\">\n                            <div className=\"setting-change-profile text-center\">\n                              <div className=\"change-profile-icon\" onClick={handleAvatar}>\n                                <span><img src={avatar}/></span>\n                              </div>\n                              <h3 className=\"user-title\">Change Image</h3>\n                            </div>\n                          </div>\n                          <div className=\"col-xl-9 col-lg-9 col-md-9 col-sm-12 col-12 user-setting-right\">\n                            <div className=\"row\">\n                              <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\">\n                                <div className=\"theme-input-box\">\n                                  <label>Display Name</label>\n                                  <input className=\"theme-input\" type=\"text\" name=\"Display Name\"\n                                         value={user.name}\n                                         onChange={(e) => setUser({...user, name: e.target.value})}\n                                         placeholder=\"Stefan Harary\"/>\n                                </div>\n                              </div>\n                              <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\">\n                                <div className=\"theme-input-box\">\n                                  <label>Wallet Address</label>\n                                  <input className=\"theme-input\" type=\"text\" name=\"wallet address\"\n                                         placeholder=\"Please connect a wallet\" disabled=\"\"/>\n                                </div>\n                              </div>\n                              <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\n                                <div className=\"theme-input-box\">\n                                  <label>To update your address just change your account in\n                                    your wallet.</label>\n                                  <textarea className=\"theme-input\"\n                                            value={user.details}\n                                            onChange={(e) => setUser({...user, details: e.target.value})}\n                                            rows=\"4\" placeholder=\"default\"></textarea>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"row\">\n                          <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\n                            <div className=\"theme-form-title text-center\">\n                              <h3 className=\"theme-title\"><span>Social Media</span></h3>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"row\">\n                          <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\">\n                            <div className=\"theme-input-box\">\n                              <label>Twitter</label>\n                              <input className=\"theme-input\" type=\"text\" name=\"twitter\"\n                                     placeholder=\"link to your twitter\"/>\n                            </div>\n                          </div>\n                          <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\">\n                            <div className=\"theme-input-box\">\n                              <label>Cent</label>\n                              <input className=\"theme-input\" type=\"text\" name=\"cent\" placeholder=\"link to your cent\"/>\n                            </div>\n                          </div>\n                          <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\">\n                            <div className=\"theme-input-box\">\n                              <label>Reddit</label>\n                              <input className=\"theme-input\" type=\"text\" name=\"reddit\"\n                                     placeholder=\"link to your reddit\"/>\n                            </div>\n                          </div>\n                          <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\">\n                            <div className=\"theme-input-box\">\n                              <label>Youtube</label>\n                              <input className=\"theme-input\" type=\"text\" name=\"youtube\"\n                                     placeholder=\"link to your youtube\"/>\n                            </div>\n                          </div>\n                          <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\">\n                            <div className=\"theme-input-box\">\n                              <label>Instagram</label>\n                              <input className=\"theme-input\" type=\"text\" name=\"instagram\"\n                                     placeholder=\"link to your instagram\"/>\n                            </div>\n                          </div>\n                          <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\n                            <div className=\"theme-input-box\">\n                              <div className=\"Listing-checkbox\">\n                                <input className=\"styled-checkbox\" id=\"styled-checkbox-1\" type=\"checkbox\"\n                                       value=\"value1\"/>\n                                  <label htmlFor=\"styled-checkbox-1\"><span><b>Disable email notifications.</b> (You won't recieve ANY emails from Mintable if you do this - including important ones related to your account security or purchases)</span></label>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"row\">\n                          <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\n                            <div className=\"theme-form-title text-center\">\n                              <h3 className=\"theme-title\"><span>Change your password</span></h3>\n                            </div>\n                          </div>\n                        </div>\n                        <div className=\"row\">\n                          <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\">\n                            <div className=\"theme-input-box\">\n                              <label>Current Password</label>\n                              <input className=\"theme-input\" type=\"password\" name=\"current password\"\n                                     onChange={(e) => setOldPass(e.target.value)}\n                                     placeholder=\"Enter current password\"/>\n                            </div>\n                          </div>\n                          <div className=\"col-xl-6 col-lg-6 col-md-6 col-sm-6 col-12\">\n                            <div className=\"theme-input-box\">\n                              <label>New Password</label>\n                              <input className=\"theme-input\" type=\"password\" name=\"new password\"\n                                     onChange={(e) => setNewPass(e.target.value)}\n                                     placeholder=\"Enter new password\"/>\n                            </div>\n                          </div>\n                          <div className=\"col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12\">\n                            <div className=\"theme-input-box text-center\" style={{marginTop: 30}}>\n                              <button type=\"button\" onClick={saveChanges} className=\"theme-btn\">Save Changes</button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n    </div>\n  )\n}\n\nexport default Settings\n"]},"metadata":{},"sourceType":"module"}